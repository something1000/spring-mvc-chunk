<html xmlns:th="http://www.thymeleaf.org" xmlns:tiles="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <title tiles:fragment="title">Chunky !</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link rel="stylesheet" type="text/css" href="/webjars/bootstrap/4.0.0/css/bootstrap.min.css"/>
    <link href="/css/offcanvas.css" rel="stylesheet">


</head>
<body class="bg-light">
<div>

    <nav class="navbar navbar-expand-md fixed-top navbar-dark bg-dark">
        <a class="navbar-brand" href="#">Offcanvas navbar</a>
        <button class="navbar-toggler p-0 border-0" type="button" data-toggle="offcanvas">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="navbar-collapse offcanvas-collapse" id="navbarsExampleDefault">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="#">Dashboard <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Notifications</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Profile</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Switch account</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="http://example.com" id="dropdown01" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Settings</a>
                    <div class="dropdown-menu" aria-labelledby="dropdown01">
                        <a class="dropdown-item" href="#">Action</a>
                        <a class="dropdown-item" href="#">Another action</a>
                        <a class="dropdown-item" href="#">Something else here</a>
                    </div>
                </li>
            </ul>
            <form class="form-inline my-2 my-lg-0">
                <input class="form-control mr-sm-2" type="text" placeholder="Search" aria-label="Search">
                <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
            </form>
        </div>
    </nav>


    <div sec:authorize="isAuthenticated()">

        <form method="post" th:action="@{/chunk}">
            <fieldset>
                <legend>Add Chunk</legend>
                <label for="content">Password</label>
                <textarea id="content"  name="content"> </textarea>
                <div class="form-actions">
                    <button type="submit" class="btn btn-success">Chunk !</button>
                </div>
            </fieldset>

        </form>
        This content is only shown to authenticated users.
    </div>

    <div >
        <div th:if="${chunks!=null}" th:each="chunk : ${chunks}" style="margin:5px;border-color: #000;border:1px;float:left;width:50%;padding:5px;background-color:#26fa99">
            <div style="width:100%;float:right;font-family: Consolas; font-size: 10px; color:#112233">
                <span sec:authorize="hasRole('ROLE_ADMIN')" style="float:left"><a th:href="@{/delete/{id}(id=${chunk.getId()})}">x</a></span>
                <span style="float:right;"><span th:text="*{T(java.time.Duration).between(chunk.getPostdate(),T(java.time.LocalDateTime).now()).toMinutes()}"></span>minut temu</span>
            </div>
            <span style="color:#f0f0f0" th:utext="${chunk.isDeleted()} ? ${@environment.getProperty('chunk.view.delete-message')} : *{chunk.getContent()}">.ąćł.</span>
        </div>
        ąćęłó
    </div>

    <div th:if="${pages != null}" th:text="*{pages}">xD</div>

    <div th:if="${#httpServletRequest.getAttribute('SPRING_SECURITY_LAST_EXCEPTION')}" th:text="${#httpServletRequest.getAttribute('SPRING_SECURITY_LAST_EXCEPTION').getMessage()}">xd</div>
</div>
<script src="/webjars/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript" src="/webjars/bootstrap/4.0.0/js/bootstrap.min.js"></script>

<script src="/js/offcanvas.js"></script>
</body>
</html>